# 高级语言及其语法描述
## 程序语言的定义
### 语法
- 程序本质上是一定字符集上的字符串
- 语法：一组规则，通过语法可以行程和产生一个形式上正确的程序
	- **描述了语言的程序的正确形式**
- 规则：
	- **词**法规则：**单词符号**的形成规则
		- 单词符号是语言中具有独立意义的最基本结构，一般包括：常数、标识符、基本字、算符、界符等
		- 描述工具：**有限自动机**
	- **语**法规则：**语法单位**的形成规则
		- 规定了如何从单词符号形成语法单位
		- 语法单位包括：表达式、语句、分程序、过程、函数、程序等
		- 描述工具：**上下文无关文法（文法）**
- 语法规则和词法规则定义了程序的形式结构，是**判断输入字符串是否构成一个形式上正确的程序的依据**
- 一个编译器的前端模型：![image.png](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20230416110048.png)

### 语义
- 语义：为程序代码赋予**意义**
- 对于语言来说，不仅需要词法、语法规则，还需要定义它的单词符号和语法符号的意义
	- 离开了语义的语言只是一堆符号的集合，而不存在任何意义
- 描述方法：
	- 自然语言描述：隐藏错误、二义性和不完整性
	- 形式描述：操作语义、指称语义、代数语义

> 对于一段程序，我们可以使用语法规则和词法规则来判定句式是否**正确**，使用语义规则来确定这段程序的**意义**

## 程序语言的语法描述
### 基本概念的介绍
- 字符集：有穷字母表$\Sigma$
- 字符：语言中最基本不可再分的单位
- 字（字符串、符号串）：字符集中构成的一个有穷序列
- 空字：不包含任何字符的序列，记作$\varepsilon$
- 闭包：字符集$\Sigma$上的所有字的全体，记作$\Sigma^*$
	- $\Sigma=\{a,b\}\rightarrow\Sigma^*=\{\varepsilon, a, b, aa, ab, ba, bb, aaa, \dots \}$
	- 正规闭包：不包含空字的闭包，记作$\Sigma^+$
		- $\Sigma=\{a,b\}\rightarrow\Sigma^*=\{a, b, aa, ab, ba, bb, aaa, \dots \}$
- 积（连接）：$UV=\{\alpha\beta|\alpha \in U, \beta \in V\}$
	- $U=\{a, aa\}, V=\{b, bb\}\rightarrow UV=\{ab, abb, aab, aabb\}$

### 上下文无关文法
- 文法：描述语言的语法结构的形式规则
	- 一个最左推导的过程：![文法的推导过程.gif](https://raw.githubusercontent.com/alwaysmissin/picgo/main/%E6%96%87%E6%B3%95%E7%9A%84%E6%8E%A8%E5%AF%BC%E8%BF%87%E7%A8%8B.gif)
- 上下文无关文法是一个四元式$G=(V_T,V_N,S,P)$：
	- **终结符**集合$V_T$：是文法所定义的一个语言的基本符号集合
	- **非终结符**集合$V_N$：每个非终结符表示一个终结符号串的集合
	- 文法的**开始符**号$S$：是一个非终结符
	- **产生式**集合$P$：
		- 包括：
			- 产生式头部（左部）
			- 箭头
			- 产生式体（右部）
				- 可以是终结符也可以不是终结符
		- 用于表示某个构造的某种书写形式
- 产生式：
	- 产生式的简化：![image.png](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20230416113326.png)
	- 当且仅当$A\rightarrow \gamma$为一个产生式时，可以推出$\alpha A \beta \Rightarrow\alpha\gamma\beta$
- 表示：
	- $\alpha_1 \stackrel{+}{\Rightarrow} \alpha_n$：经过$\ge 1$步，可以由$\alpha_1$推导出$\alpha_n$
	- $\alpha_1 \stackrel{*}{\Rightarrow} \alpha_n$：经过$\ge 0$步，可以由$\alpha_1$推导出$\alpha_n$
- 句型：假定$G$是一个文法，$S$是其开始符号，若$S \stackrel{*}{\Rightarrow} \alpha$，则称$\alpha$是一个句型
	- 仅含终结符的句型是一个**句子**
	- 句子的集合称为**语言**，记作$L(G)$，且$L(G)=\{\alpha|S \stackrel{+}{\Rightarrow} \alpha, \alpha\in V^*_T\}$
- 推导：从一个句型到另一个句型的推导往往不唯一
	- 最左推导：任何一步$\alpha\Rightarrow\beta$都是对$\alpha$中的**最左非终结符进行替换**
	- 最右推导：任何一步$\alpha\Rightarrow\beta$都是对$\alpha$中的**最右非终结符进行替换**

### 语法树与二义性
- 用一张图表示一个句型的推导，称为语法树
![image.png](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20230416141212.png)
- 语法树的性质
	- 根节点的标号为文法的开始符号
	- 每个叶子结点的标号为一个终结符号或$\varepsilon$
	- 每个内部节点的标号为一个非终结符号
	- 一个结点的左右子节点为其产生式中的右部
- 最左和最右推导分别对应一个语法树（可能相同）
#### 语法树的二义性
- 如果一个文法存在某个句子对应两颗不同的语法树，则说这个文法是二义的
- 要证明一个文法具有二义性，只需要找到一个终结符号串，说明他是两颗以上语法分析树的结果
> 因为具有两棵以上语法分析树的符号串通常具有多个含义，所以我们需要为编译应用设计出没有二义性的文法，或者在使用二义性文法时使用附加的规则来消除二义性。
- 消除二义性的方法：
	- 修改文法产生式的优先级和结合性
	- 引入新的非终结符：通过引入新的非终结符来将二义性的产生式拆分成多个产生式，以消除歧义
	- 左因子化和右因子化
	- 使用括号或其他符号明确语法结构