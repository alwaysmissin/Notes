# 计算机的基本组成
## 计算机系统概述
- #计组重点 计算机系统：
	- 配套的硬件设备
	- 软件系统
- 软件与硬件：
	- 硬件：计算机系统的实体部分，由看得见摸得着的各种电子元器件以及各类光、电、机设备的实物组成
		- 包括主机、外部设备
	- 软件：人们事先编制的具有各类特殊功能的程序，是无形的
	- 固件：具有某种软件功能的硬件
		- 一般使用ROM(Read Only Memory)实现
- 系统程序与应用程序：
	- 系统程序：用来对整个计算机系统进行调度、管理、监视及服务的各种软件
	- 应用程序：用户在各自的系统中开发和应用的各种程序
## #计组重点 冯•诺依曼计算机的特点
1. 计算机由以下五个部分组成
	- **运算器**：完成算术运算和逻辑运算，并将运算的中间结果**暂存在运算器**内
	- **存储器**：存放数据和程序
	- **控制器**：控制、指挥程序和数据的输入、运行和处理运算结果
	- **输入设备**：将人们熟悉的信息形式转换为机器能识别的信息形式
		- 常见：键盘、鼠标
	- **输出设备**：将机器运算结果转换为人们熟悉的信息形式
		- 常见：打印机、显示器
2. 采用**存储程序**方式
	- 指令和数据以同等的地位存放在**存储器**中，并可以**按地址寻访**
	- 计算机能在不需要操作人员的干预下，自动完成逐条取出指令和执行指令的任务
3. 指令和数据均使用二进制数表示
4. 指令由**操作码和地址码**组成
	- 操作码：指出操作**类型**
	- 地址码：指出**操作数的地址**
	- 程序：由一串指令组成
5. 指令在存储器内按照**顺序存放**
	- 通常情况下，指令是顺序执行的
	- 在特定条件下，可以改变执行顺序
6. 以运算器为中心
- #计组重点 简述：基于**存储程序**原理的冯诺依曼计算机工作方式的基本特点是**按地址访问并顺序执行指令**
- 冯诺依曼计算机硬件图（**以运算器为中心**）：![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20230306203845.png)
> 冯诺依曼结构以运算器为中心的缺点：
> 所有的数据都经过运算器，但有的数据可能不需要进行运算，仍然需要经过运算器，导致了算力的浪费，降低计算机的运行效率
> 因此现代的计算机，不再以运算器为中心，而是以存储器为中心

## 计算机硬件框图
- 以存储器为中心的现代计算机结构：![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20230306210112.png)
- 现代计算机硬件框图：![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20230306213745.png)
- 计算机核心部件：
	 -  **[[存储器#主存储器|主存储器]]（内存、CPU缓存）** 是存储器子系统中的一类，用来存放程序和数据，可以直接与CPU交换信息
		- 另一类称为[[辅助存储器|辅助存储器]]，指**除了计算机内存以及CPU缓存以外的存储器**
	- 中央处理器（Central Processing Unit）：
		- 主要功能：解释计算机指令以及处理计算机软件中的数据
		- 包括：
			- **算数逻辑单元（ALU）**：用来完成算数逻辑运算
			- **控制单元（CU）**：用来**解释存储器中的指令**，并发出各种操作命令来执行指令
			- [[高速缓冲存储器|高速缓冲存储器(Cache)]]
			- [[系统总线|总线]]
- 现代计算机结构模型：![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20230306221738.png)

## 计算机的工作步骤
### 上机前的准备
- 上机前的准备：
	- 建立数学模型
	- 确立计算方法
	- 编制解题程序
- 机器指令的组成：`操作码：地址码`
![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20230306222504.png)
- 计算$ax^2+bx+c$程序清单：![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20230306222629.png)
### 计算机的解题过程
#### 运算器的基本组成及操作过程
- 运算器的组成：
	![150](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20230306224129.png)
	- 3个寄存器：
		- 累加器：**ACC**（Accumulator）
		- 乘商寄存器：**MQ**（Multiplier-Quotient Register）
		- 操作数寄存器：**X**
- 各寄存器所存放的各类操作数

|  |ACC |MQ|X|
|:-:|:-:|:-:|:-:|
|加法|被加数<br>和|  |加数|
|减法|被减数<br>差|  |减数|
|乘法|乘积高位|乘数 <br>乘积低位|被乘数|
|除法|被除数 <br>余数|商|除数|
- 四个基本运算的操作过程：
	- 加法：![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20230306231627.png)
	- 减法：![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20230306231643.png)
	- 乘法：![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20230306231655.png)
	- 除法：![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20230306231707.png)

#### 存储器的基本组成
![150](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20230306231738.png)
- 地址码的组成：
	- 存储体——存储单元——存储元件
	- 类比：教学楼——教室——座位
	- 存储单元是一个**字节**
	- 逐级寻找
- 存储器的组成：
	- 存储体
	- MAR：存储器**地址（Address）寄存器**
		- 反映**存储单元的个数**
		- MAR=4bit->存储单元个数=$2^4=16$
	- MDR：存储器**数据（Data）寄存器**
		- 反映**存储字长**
		- MDR=8bit->存储字长=8bit
```ad-attention
MAR、MDR为寄存器，实际是在CPU内部的寄存器，而不是在主存中，本章如此画图是为了表示其关系与方便
```
#### 控制器的基本组成
![150](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20230306232437.png)
- 控制器的基本组成：
	- 控制单元：CU（Control Unit）
	- PC取指令
		- 用于存放当前欲执行指令的**地址**
		- 具有计数功能
	- IR分析指令
		- 用于存放当前欲执行的**指令**
		![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20230306233003.png)
#### #计组重点 主机完成一条指令的过程
- 取数过程：
![从内存中读取数据.gif](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F%E4%BB%8E%E5%86%85%E5%AD%98%E4%B8%AD%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE.gif)
- 存数过程：
![存数过程.gif](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F%E5%AD%98%E6%95%B0%E8%BF%87%E7%A8%8B.gif)
- 两个过程之间的异同点：
	- 同：取指、译码
	- 异：执行、访存

## 计算机系统性能评价
- 制造成本
- 衡量计算机性能的基本指标：
	- 响应时间（Response Time）：指从开始一个任务到完成该任务的时间，或称为执行时间
	- 吞吐量（throughput）：单位时间内完成的工作量
### 响应时间与吞吐量
- 假定用户不间断的输入请求，则在系统资源充裕的情况下，单个用户的吞吐量与相应时间成反比，即**响应时间越短，吞吐量越大**
> 一般来说，降低响应时间几乎总是可以增加吞吐率。因此，通过将计算机中所的处理器更换为更高速的型号，可以改进相应时间和吞吐率。为系统增加额外的处理器，使用多处理器来分别处理独立的任务并不会使任务完成的更快，只有吞吐率得到提高。
> 但是，如果增加处理器对处理任务的需求和吞吐率一样打，系统可能强制后续请求进行排队。在这种情况下，改善吞吐率可以同时改进响应时间，因为这样会减少队列中的等待时间。所以，在实际的计算机系统中，**响应时间和吞吐率往往相互影响**。
> ——⟪计算机组成与设计：硬件软件接口⟫
- 假设有两个机器X、Y，如果X的执行速度是Y的n倍，则：$$\frac{性能_X}{性能_Y}=\frac{执行时间_Y}{执行时间_X}=n$$

### 性能的度量
- 在比较计算机性能时，使用执行时间来衡量计算机的性能
	- 完成同样工作量所需要的时间最短的那台即性能最好的
	- 处理器时间往往被多个程序共享使用，一个处理器上可以同时运行多个程序
	- 用户感觉到的时间：
		- CPU时间：表示在CPU上花费的时间
			- 用户CPU时间：用于用户程序的时间
			- 系统CPU时间：操作系统为用户程序执行相关任务所花费的CPU时间
		- 其他时间：指等待I/O操作完成或CPU花在其他用户程序的时间
> 在不同应用场合，用户所关心的性能有所不同：
> 运行在服务器上的应用，主要关注I/O性能；多媒体应用要求吞吐率高；事务处理系统要求响应时间快

- 计算机硬件的主要技术指标：
	- 机器字长
	- 存储容量
	- 运算速度
- 一些重要概念及技术指标：
	- 机器字长：CPU一次能处理数据的位数与CPU中的寄存器位数有关
	- 时钟周期：CPU产生的同步市州定时信号，也就是CPU主脉冲信号，宽度称为时钟周期
	- 时钟频率：CPU中的主脉冲信号的时钟频率，为CPU时钟周期的倒数$$\text{程序的CPU执行时间}=\text{程序的CPU时钟周期数}\times\text{时钟周期长度}=\frac{\text{程序的CPU时钟周期数}}{\text{时钟频率}}$$
	- 指令平均时钟周期数（Clock Cycle Per Instruction(CPI)）：$$\text{CPU时间}=\frac{\text{指令数}\times\text{CPI}}{时钟频率}$$
	- MIPS(Million Instructions Per Second)
		- 使用MIPS数表示性能的局限性：
			- 不同机器的指令集不同
			- 程序由不同的指令混合而成
			- 指令使用的频度动态变化![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20230307131132.png)
	- MFLOPS(Million Floating-point Operations Per Second)：
		- 局限：
			- 与机器相关性大
			- 并不是程序中花时间的部分
> [!note] 
> Instruction System，指令集，指计算机所能执行的全部指令（功能的集合）。从系统结构角度看，它实现了软件和硬件的交互关系，是表征计算机性能的重要因素。
- 性能的改进：![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20230307130159.png)
