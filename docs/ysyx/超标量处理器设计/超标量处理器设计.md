# 超标量处理器设计-姚永斌
## 超标量处理器设计概览
### 超标量处理器的流水线
#### 顺序执行
![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo20240418194107.png)
- P10: 所有的 FU 都要经历相同周期数的流水线, 即使他们什么也没做
- P11: 对于不同的 FU, 可以进行旁路的时机不同

#### 乱序执行
![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo20240418194319.png)
- P12: 寄存器的重命名在解码阶段完成, 也可以单独使用一个流水段

#### 对比
超标量处理器书上的顺序超标量和乱序超标量的图 ![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo20240420112411.png)


## Cache
### Cache 的一般设计
#### Cache 的组成方式
- P17: 分支预测和 Cache 直接影响着超标量处理器的性能
- P18: L1 紧密耦合在处理器的流水线中, 是影响处理器性能的一个关键因素
- P18: 现代超标量处理器普遍采用哈佛结构, L1 Cache 包含两个物理结构: I-Cache 和 D-Cache
	- D-Cache 需要考虑读写, 而 I-Cache 只需要考虑读
- P18: L1 使用 SRAM 实现
- **P22: Cache 的访问一般都是处理器中的关键路径, 如果在一个周期内完成访问过程, 会占据大量的延迟, 因此要想使处理器运行在比较高的频率下, Cache 的访问需要使用流水线**![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo20240426124149.png)
#### Cache 的写入
- P26: 将确实地址对应的数据块从下级存储器中读取出来是必不可少的


## 指令解码
### 指令缓存
- P177: 从 I-Cache 中取出的指令个数多余每周期可以解码的指令个数
	- 需要在取指阶段和解码阶段之间添加缓存, 这个缓存本质上是 FIFO
	- 指令缓存是超标量处理器的必须部件: 
		- 即使 I-Cache 确实, 指令缓存中也仍有一些指令
	- 多端口 FIFO, 但是使用交叠的方式, 使用多个单端口的 SRAM 实现, 从而避免多端口 SRAM 所带来的的硬件和速度上的限制