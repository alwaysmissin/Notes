# 高级操作
## SELECT TOP字句
- 用于规定要返回的记录数目
- 对于拥有数千条记录的大型表来说，是非常有用的
- 语法：
```mysql
SELECT column_name(s) FROM table_name LIMIT number;
```
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002110120.png)
## LIKE操作符
- `LIKE`操作符用于在`WHERE`字句中搜索列中的指定模式
- 语法：
```sql
SELECT column_name(s) FROM table_name WHERE column_name LIKE pattern;
```
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002110317.png)
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002110325.png)
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002110333.png)
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002110341.png)
## 通配符
- 通配符可以用于替代字符串中的任何其他字符
- 通配符与`LIKE`操作符一同使用
| 通配符                   | 描述                       |
| ------------------------ | -------------------------- |
| `%`                      | 替代0个或多个字符          |
| `_`                      | 替代一个字符               |
| `[charlist]`             | 字符列中的任何单一字符     |
| `^charlist`或`!charlist` | 不在字符列中的任何单一字符 |
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002110341.png)
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002110709.png)
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002110730.png)
- 使用技巧：
	- 不要过度使用通配符，如果其他操作能达到相同的目的，应该使用其他操作符
	- 在确实需要使用通配符时，也尽量不要把它们用在搜索模式的开始处 **（把通配符置于开始处，搜索起来是最慢的）**
	- 仔细注意通配符的位置，如果放错地方，可能不会返回想要的数据
## IN操作符
- `IN`操作符允许在`WHERE`字句中规定多个值
- 语法
```sql
SELECT column_name(s) FROM table_name WHERE column_name IN (values1, values2, ...);
```
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002110918.png)
## BETWEEN操作符
- `BETWEEN`操作符选取介于两个值之间的数据范围内的值
- 值可以为
	- 数值
	- 文本
	- 日期
- 语法
```sql
SELECT column_name(s) FROM table_name WHERE column_name BETWEEN value1 AND value2;
```
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002111121.png)
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002111133.png)
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002111142.png)
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002111151.png)
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002111211.png)
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002111222.png)
> **请注意，在不同的数据库中，BETWEEN 操作符会产生不同的结果！  
> 在某些数据库中，BETWEEN 选取介于两个值之间但不包括两个测试值的字段。  
> 在某些数据库中，BETWEEN 选取介于两个值之间且包括两个测试值的字段。 
> 在某些数据库中，BETWEEN 选取介于两个值之间且包括第一个测试值但不包括最后一个测试值的字段。
> 因此，请检查您的数据库是如何处理 BETWEEN 操作符！
- 优点：
	- 在有很多合法选项时，`IN`操作符的语法更清楚、直观
	- 相对`AND & OR`，`IN`的求值顺序更容易管理
	- `IN`操作符一般比一组`OR`操作符执行更快
	- `IN`的最大优点是可以包含其他`SELECT`语句，可以更动态的建立`WHERE`字句
## 别名
- 在SQL中，可以位表名称或列名称指定别名
- 创建别名是为了让列名称的可读性更强
- 语法
```sql
SELECT column_name(s) AS alias_name FROM table_name;
SELECT column_name AS alias_name FROM table_name AS alias_name;
```
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002111548.png)
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002111558.png)
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002111608.png)
- 使用别名的用处：
	- 在查询中涉及超过一个表
	- 在查询中使用了函数
	- 列名称很长或可读性差
	- 需要把两个列或多个列结合在一起

## 连接(JOIN)
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002111718.png)
- `JOIN`字句用于把来自两个或多个的表**行**结合起来，基于这些表之间的共同字段
### INNER JOIN
- `INNER JOIN`关键字在表中存在至少一个匹配时返回行
- 语法：
```sql
SELECE column_name(s) FROM table1 INNER JOIN table2 ON table1.column_name =table2.column_name;

SELECE column_name(s) FROM table1 JOIN table2 ON table1.column_name =table2.column_name;
```
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002111959.png)
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002112015.png)
> 在使用`JOIN`时，`ON`与`WHERE`条件的区别
> 1. `on`条件是在生成临时表时使用的条件，他不管`ON`中的条件是否位真，都会返回左边表中的记录
> 2. `WHERE`条件是在临时表生成好后，再进行条件的过滤

### LEFT JOIN
- `LEFT JOIN`关键字从左表(table1)返回所有的行，即时右表(table2)中没有匹配
	- 如果右表中没有匹配，则结果为`NULL`
- 语法
```sql
SELECT column_name(s) FROM table1 LEFT JOIN table2 ON table1.column_name = table2.column_name;
```
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002112825.png)
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002112842.png)
### RIGHT JOIN
- `RIGHT JOIN` 关键字从右表（table2）返回所有的行，即使左表（table1）中没有匹配
	- 如果左表中没有匹配，则结果为 `NULL`
- 语法：
```sql
SELECT column_name(s) FROM table1 RIGHT JOIN table2 ON table1.column_name = table2.column_name;
```
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002113011.png)
![](https://raw.githubusercontent.com/alwaysmissin/picgo/main/20221002113022.png)
### FULL OUTER JOIN
- `FULL OUTER JOIN`关键字只要左表和右表其中一个表存在匹配，则返回行
- 结合了`LEFT JOIN`和`RIGHT JOIN`
- 语法：
```sql
SELECT column_name(s) FROM table1 FULL OUTER JOIN table2 ON table1.column_name = table2.column_name;
```
> MySQL不支持`FULL OUTER JOIN`