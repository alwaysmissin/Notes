TARGET DECK
计算机网络

---
计算机网络系统的基本组成是? #flashcard
通信子网与资源子网![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20231201164147.png)
- **通信子网**: 由路由器和通信链路组成, 完成网络通信任务
	- 链路通信提供物理信道
	- 路由器是一种专用计算机, 具有存储转发, 路由选择, 差错控制, 流量控制等功能
- **资源子网**: 由连接到通信子网的服务器和主机系统组成, 为网络用户提供各种软硬件共享资源和数据处理能力
	- 硬件共享资源: CPU, 存储器, 硬盘等
	- 软件共享资源: 操作系统, 数据库系统, 工具软件和应用程序
<!--ID: 1701420249862-->

---
什么是计算机网络? #flashcard 
将若干具有**独立**功能的计算机系统, 使用某种或多种**通信介质连接**起来, 通过完善的**网络协议**, 在**数据交换**的基础上, 实现**网络资源共享**的系统被称为**计算机网络**.
<!--ID: 1701421688654-->

---
如果用户 A 需要通过网络向用户 B 传送数据, 那么首先将数据报送入应用层, 在该层给他附加控制信息后送入表示层; 在表示层对数据进行必要的变换并加上头部后送入会话层; 在会话层加头部后送入传输层; 在传输层将数据分割为{②}后送送至网络层; 在网络层将数据封装成{③}后送至数据链路层; 在数据链路层将数据加上头部和尾部封装成{④}后发送到物理层; 在物理层数据以{⑤}形式发送到物理线路. 用户 B 所在的系统收到数据后, 层层剥去控制信息, 最终将元数据传送给用户 B. #flashcard 
② 报文段
③ 分组
④ 数据帧
⑤ 比特流
在 OSI 参考模型中, 对等层之间传送的数据的单位称为协议数据单元 PDU, 在传输层称为**报文段或段**, 在网络层称为**分组或数据报**, 在数据链路层称为**帧**, 在物理层称为比特.
<!--ID: 1701445634145-->

---
数据链路层的相关概念、提供的主要服务、传输方式、需要解决的基本问题等。 #flashcard 
- 相关概念: 
	- 结点: 计算机或网络设备
	- 帧: 数据链路层协议数据单位 (PDU), 
	- 最大传输单元 MTU: 结点可以接收报文的最大尺寸
	- 链路: 两个结点之间的物理信道
	- 数据链路: 链路+实现数据链路层协议的软硬件
	- 范围: 本地网络
- 提供的主要服务: 可靠, 无差错的数据链路
- 传输方式: 
	- 点对点信道数据传输
	- 广播信道数据传输
- 基本问题: 
	- 封装成帧: 标识一个帧的开始与结束
		- 向 PDU 添加首部与尾部, 进行帧定界
	- 透明传输: 为上层提供透明的传输, 发送什么数据, 即收到什么数据
		- 字节填充
		- 比特填充
	- 差错控制: 减小传播过程中的噪声干扰
		- 检错与纠错
			- 循环冗余码
<!--ID: 1701503220223-->

---
对差错控制方式认识, 以及海明码、海明距离和**循环冗余码**的计算和验证 #flashcard 
- 差错控制方法: 通过特殊编码, 使接收端能够发现甚至自动纠正错误
- 海明码: 
- 海明距离: 决定了编码系统的检错和纠错能力
	- 检测 $d$ 位出错, 海明距离 $\ge d+1$
	- 纠正 $d$ 位错误, 海明距离 $\ge 2d + 1$
- 循环冗余码: 
<!--ID: 1701514751630-->


---
从协议配置、透明方式和工作原理等方面理解 HDLC 协议 #flashcard 
- 协议配置
	- 三种类型站
		- 主站: 负责对数据链路实行全面的管理, 包括发起传输, 组织数据流, 差错控制与恢复等
		- 次站: 受控于主站, 只能按照主站的命令进行相应操作
		- 复合站: 具有主站和次站的功能, 两个复合站之间可以平等地进行通信
	- 两种链路结构
		- 非平衡配置: 点-点, 或点-多点, 支持全双工和半双工 ![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20231202160301.png)
		- 平衡配置: 仅点-点, 支持全双工和半双工 ![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20231202160311.png)
	- 三种数据传送操作方式
		- 正常响应方式: 非平衡, 数据由主站发出, 次站只能响应
		- 异步响应方式: 非平衡, 次站可以主动发送响应, 主站负责线路管理
		- 异步平衡方式: 平衡, 任一复合站都可以发起数据传输
- 透明方式: 
	- 发送方若连续发送 5 个 `1` , 则插入一个 `0`
	- 接收方若连续接收到 5 个 `1`, 则删去一个 `0`
- 工作原理
	- 建立数据链路连接
	- 传输数据帧: 当数据链路建立完毕, 发送/接收方按照某种流量控制侧率发送和接收数据帧, 并允许捎带应答
	- 拆除链路连线: 全部数据发送完毕, 发送方发出 DISC (拆除连接)无编号帧, 接收方返回 UA 作为相应, 此时释放链路层实体占用的资源
<!--ID: 1701514751641-->


---
从应用场景、协议组成、帧格式和运行过程等待方面对 PPP 协议的理解 #flashcard 
- 应用场景: 通过拨号或专线方式建立点对点的连接和通信, 为各种主机、网桥和路由器之间的**简单**连接提供一种共同的标准解决方案
- 协议组成： ![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20231202162146.png)
	- 方法: 将 IP 数据报封装到串行链路中
	- 链路控制协议: 建立、配置和测试数据链路连接
		- 通信双方可以协商一些选项
	- 网络控制协议： 协商链路上传输的数据包格式与类型
		- 用于支持不同的网络层协议，如 IP
- 帧格式 ![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20231202162412.png)
- 透明传输
	- 同步方式: **零比特填充**, 以 HDLC 一致
	- 异步方式: **字符填充法**, 填充转义字符
- 运行过程
<!--ID: 1701514751648-->


---
ALOHA、时隙 ALOHA、CSMA、CSMA/CD、CSMA/CA 的基本原理、方法和特点 #flashcard 
- ALOHA
	- 基本思想: **不监听信道, 想发就发, 随机重发**
	- 传输机制: 
		- 发送端发起传输请求后可以**立即发送数据**, 无需等待授权, 也不需要检测信道是否繁忙
		- 接收端在成功接收数据后**返回一个 ACK 帧, 通知发送端传输完成**
		- 接收端收到的数据校验**有错, 则不发送 ACK 帧**
		- 发送端在预定时间内未收到 ACK, 则认为发生碰撞, 在一个随机时间后**重新发送**, 知道接收到 ACK 帧
- 时隙 ALOHA
	- 基本思想: 不监听信道, **规定发送的时间**
	- 传输机制: 
		- 将时间划分为等长的时隙, 每个时隙可以传输 1 个帧
		- 结点间**严格时钟同步**, 且只能在时隙开始时发送帧
		- 若 2 个及以上结点在同一时隙发送帧, 结点检测到冲突
- CSMA
	- 基本思想
		- 载波侦听, 在发送数据前先检测新到, 信道空闲则立即发送数据; 若信道忙, 则等待并继续检测信道
- CSMA/CD
	- Carrier Sense Multiple Access with Collision Detection, 载波侦听多址接入/**碰撞检测**
	- 碰撞检测
		- 结点变发送数据边检测信道上的信号电压大小
	- 碰撞退避算法
		- 二进制指数退避
	- 方法
		- 当结点检测到信号电压变化值超过了阈值时候, 则认为至少有两个结点在同时发送数据, 即发生了碰撞
		- 每个正在发送数据的结点, 一旦发现碰撞, 会立即停止发送, 免得继续浪费网络资源, 并在等待一段**随机时间**后再次发送
	- 特性
		- 只支持**半双工**
		- 发送数据帧后最多**经过 2 t 的时间，发送端就可知道是否遭受了碰撞** (**争用期**)
		- 必须确定**最小帧长度**, 长度小于最小帧长度的是无效帧
		- 检测到碰撞后, 发送端立即停止发送数据, 并发送若干比特干扰信号通知其他结点
		- 由于存在发送成功与否的不确定性, 因此采用该协议的网络的平均通信量远低于其最高数据速率
- CSMA/CA
	- Carrier Sense Multiple Access with Collision Avoidance, 载波监听多路访问/**冲突避免**机制
	- 一般工作在**无线网**中
	- 无线网与有线网的区别
		- 发生碰撞的信号**能量通常较小**, 难以检测
		- 隐蔽结点问题: 发送结点无法检测到隐蔽结点, 从而存在冲突的可能性
		- 暴露结点问题: 发送结点检测到有冲突的结点启示并不影响其发送数据
	- 方法
		- 发送数据前, 监听信道
			- 冲突: 进行二进制指数退避
			- 空闲: 维持一段时间后, 再等待一段随机的时间后, 依然没有别的结点使用, 则发送数据
			- 由于每个结点采用的随机时间不同, 则可以减少冲突的机会 (避免)
		- 先发送一段**很小的请求传送报文 RTS 给目标节点**, 并等待目标端回应报文 CTS 后, 才开始传送数据
<!--ID: 1701514751653-->

---
局域网和以太网的概念、特点、结构 #flashcard 
- 局域网: 
	- 在局部的地理范围内, 将各种计算机, 外部设备和数据库等互相联起来组成的计算机通信网
	- 特点: 
		- 具有**广播**功能
			- 从一个站点可以很方便的访问全网
			- 局域网上的主机可共享连接在局域网上的各种硬件和软件资源
		- 便于系统扩展和逐渐的演变, 各设备的位置可灵活调整和改变
		- 提高了系统的可靠性、可用性和残存性
<!--ID: 1701523830396-->


---
局域网的扩展, 碰撞域, 广播域, 网桥, 广播风暴和生成树等 #flashcard 
- 物理层
	- 集线器
		- 扩大了局域网覆盖的地理范围
		- 构成了更大的碰撞域
- 数据链路层
	- 网桥
		- 存储转发
			- 当网桥收到一个帧时候，并不向所有的接口转发，而是先检查此帧的目的 MAC 地址，然后在确定将该帧转发到哪一个接口
			- 基于**自学习**算法的帧转发
				- 基本思想
					- 若 A 发出的帧从接口 x 进入了网桥, 则反过来, 可以通过 x 接口将帧传送给 A
				- 转发表
					- 每收到一个帧，就在表中记录其原地址和进入网桥的接口
				- 生成树协议
					- 防止由于冗余链路产生的环, 确保网络中无环路的逻辑拓扑结构, 从而避免广播风暴
		- 连接了两个不同的局域网
		- 隔离了广播域和碰撞域
	- 以太网交换机
		- 实质
			- 多接口的网桥
		- 全双工
		- 扩大了广播域隔离了碰撞域
<!--ID: 1701523830405-->

---
虚拟局域网, 包括相关的概念, 格式等等 #flashcard 
## 虚拟局域网
- 使用交换机构成的巨大的广播域会带来一系列的问题: 
	- 广播风暴: 浪费网络资源和各主机的 CPU 资源
		- 使用路由器来分割广播域的成本较高
### 虚拟局域网 VLAN 概述
- 虚拟局域网: 将局域网内的站点划分成与物理位置无关的逻辑组
	- 属于同一个 VLAN 的站点之间可以直接进行通信, 而不同 VLAN 中的站点不能直接通信
	- 网络管理员可对局域网中的个交换机进行配置来建立多个逻辑上独立的 VLAN
> [!attention] 
> 虚拟局域网 VLAN 并不是一种新型的网络, 只是局域网能够提供给用户的一种服务
### 虚拟局域网 VLAN 的实现机制
- 最常见的实现方法: 基于以太网交换机的接口来实现 VLAN
	- 要求以太网交换机能够实现一下两个功能: 
		- 能够处理带有 VLAN 标记的帧, 即 `IEEE 802.1Q` 帧
		- 交换机的接口可以支持不同的接口类型, 不同的接口类型的接口对帧的处理方式有所不同
- `IEEE 802.1Q` 帧: 在原地址字段和类型字段之间插入了 4 字节的 VLAN 标签 (tag) ![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20231119140612.png)
	- 标签内容: ![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20231119140649.png)
		- 标签协议标识符 TPID: 固定 `0x8100`, 表示此帧为 `IEEE 802.1Q` 帧
		- 优先级 PRI: 值越大优先级越高. 
			- 当网络阻塞时候, 设备优先发送优先级高的帧
		- 规范格式指示符 CFI: 1 bit
			- `0`: 表示 MAC 地址以规范格式封装
			- `1`: 表示 MAC 地址以非规范格式封装
		- 虚拟局域网标识符 VID: 用于识别 VLAN
- `802.1Q` 帧一般不由用户主机处理, 而是**由以太网交换机来处理**
	- **当交换机收到普通的以太网 MAC 帧时候**, 会**插入 4 字节的 VLAN 标签**
	- **当交换机转发 `802.1Q` 帧时候**, 可能会**删除 4 字节的 VLAN 标签**, 使之**成为普通的以太网 IMAC 帧**
- 以太网交换机的接口类型: 
	- 根据**接口在接收帧和发送帧时对帧的处理方式的不同**, 以及**接口连接对象的不同**, 以太网交换机的接口类型一般分为 **Access** 和 **Trunk** 两种
		- Access 连接到主机, 只能通过 PVID 值与其所属 VLAN 的 ID 相同的帧
		- Trunk 连接到其他交换机, 可以通过属于不同 VLAN 的帧
	- 若未进行设置, 接口类型默认为 Access, PVID 为 1 (即默认划分到 1 号虚拟局域网)
> [!seealso] Hybrid 接口
> Hybrid 接口是华为交换机私有的接口类型.
> 既可以用于交换机之间的互联, 也可以用于交换机与用户计算机之间的互联.
> 除此之外, Hybrid 接口的绝大部分功能与 Trunk 接口相同, 不同点在于 Hybrid 接口的转发处理: Hybrid 接口会查看帧的 VID 值是否在接口的"去标签"列表中, 若存在, 则去标签后转发, 不存在则直接转发
- 举例: ![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20231119142240.png)![image.png](https://jiunian-pic-1310185536.cos.ap-nanjing.myqcloud.com/picgo%2F20231119142214.png)
<!--ID: 1701524272348-->

